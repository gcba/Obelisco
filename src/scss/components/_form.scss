/* === Variable and mixins overides === */

$input-bg: $light;
$custom-select-bg: $input-bg;
$input-placeholder-color: $grisulado-300;

$input-disabled-color: $grisulado-400;
$input-disabled-bg: $grisulado-50;

$label-margin-bottom: 0;
$label-font-weight: 600;

$custom-select-disabled-color: $input-disabled-color;
$custom-select-disabled-bg: $input-disabled-bg;

$custom-control-indicator-checked-color: $grisulado-900;
$custom-control-indicator-active-color: $grisulado-900;

$input-focus-border-color: $input-disabled-color;
$input-focus-box-shadow: $focus-box-shadow;

$custom-control-indicator-size: spaceUnits(5);
$custom-control-indicator-bg: transparent;
$custom-control-indicator-border-color: $grisulado-900;
$custom-control-indicator-border-width: 3px;
$custom-control-indicator-checked-bg: transparent;
$custom-control-indicator-checked-border-color: $grisulado-900;
$custom-control-indicator-focus-border-color: $grisulado-900;
$custom-control-indicator-active-bg: transparent;
$custom-control-indicator-active-border-color: $grisulado-900;
$custom-control-indicator-checked-disabled-bg: transparent;
$custom-control-indicator-disabled-bg: transparent;

$input-validation-focus-width: $focus-width;

$form-icons: (
  'search':
    url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(56, 72, 92, 1);transform: ;msFilter:;"><path d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"></path></svg>'),
  'valid':
  url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" style="fill: rgba(38, 135, 74, 1);transform: ;msFilter:;"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm-1.999 14.413-3.713-3.705L7.7 11.292l2.299 2.295 5.294-5.294 1.414 1.414-6.706 6.706z"></path></svg>'),
  'invalid':
  url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" style="fill: rgba(201, 59, 59, 1);transform: ;msFilter:;"><path d="M11.953 2C6.465 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.493 2 11.953 2zM13 17h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg>')
);

// Some configuration is inside ../_colors.scs

$form-validation-states: (
  'valid': (
    'color': $form-feedback-valid-color,
    'icon': none
  ),
  'invalid': (
    'color': $form-feedback-invalid-color,
    'icon': none
  )
);

/* === Custom variables and mixins === */

/* === Bootstrap Import === */

@import '~bootstrap/scss/forms';
@import '~bootstrap/scss/custom-forms';

/* === Custom styles === */

.form-group label {
  margin-bottom: $label-margin-bottom;
  font-weight: $label-font-weight;
}

.custom-control-label {
  padding: spaceUnits(1);
  padding-left: $custom-control-indicator-size + spaceUnits(6);
  padding-right: spaceUnits(3);
  margin-bottom: spaceUnits(3);
  border-radius: $border-radius * 2;

  &::before {
    left: spaceUnits(3);
    top: spaceUnits(1.5);
  }

  &::after {
    left: spaceUnits(3);
    top: spaceUnits(1.5);
  }
}

@mixin form-icon($type) {
  background-image: map-get($form-icons, $type);
  background-repeat: no-repeat;
  background-position: center right spaceUnits(2);
}

.form-control {
  transition: none;
  border: none;
  box-shadow: 0 0 0 1px $input-focus-border-color;

  &:focus {
    background-color: $input-bg;
  }
  
  &.input-search {
    @include form-icon('search');
    &:hover,
    &:focus {
      background: none;
    }
  }

  &.is-valid, &.is-invalid {
    border: none;
    
    &:focus {
      box-shadow: 0 0 0 $focus-width $focus-color;
    }
  }
  
  &.is-valid {
    box-shadow: 0 0 0 $focus-width $success;
  }
  &.is-invalid {
    box-shadow: 0 0 0 $focus-width $danger;
  }
}

.valid-feedback::before {
  content: map-get($form-icons, "valid");
  vertical-align: middle;
  margin-right: spaceUnits(1);
}
.invalid-feedback::before {
  content: map-get($form-icons, "invalid");
  vertical-align: middle;
  margin-right: spaceUnits(1);
}

.custom-control-input {
  &:not(:disabled) ~ .custom-control-label {
    cursor: pointer;

    &:hover {
      background-color: $light;
    }
  }
  &:not(:disabled):focus ~ .custom-control-label {
    box-shadow: $input-focus-box-shadow;

    &:before {
      box-shadow: none;
    }
  }

  &:disabled ~ .custom-control-label {
    color: $custom-select-disabled-color;

    &:before {
      border-color: $input-disabled-color;
    }
  }
}

.bg-light {
  .form-control,
  .custom-select {
    &:not(:disabled) {
      background-color: $white;
    }
  }
  .custom-control-input:not(:disabled) ~ .custom-control-label:hover {
    background-color: $white;
  }
}
